// Generated by CoffeeScript 1.6.2
(function() {
  var clc, fs, keys, path, reset, _;

  path = require("path");

  fs = require("fs");

  clc = require('cli-color');

  _ = require("underscore");

  keys = ["host", "port", "user", "color", "silent", "sound"];

  module.exports = function(argv) {
    var file, vals;

    vals = _.pick(argv, keys);
    file = argv.config;
    if (argv.list) {
      console.log("\nUser Configuration Values:");
      _.each(vals, function(v, k) {
        return console.log("  " + (clc.red(k)) + " " + (clc.green("=>")) + " " + v);
      });
      return console.log("\nSaved to: " + (clc.inverse(file)) + "\n");
    } else if (argv.remove) {
      reset(file);
      return console.log(clc.cyan(Date.create().format("[{h}:{mm}{tt}] ")) + "User config reset.");
    } else {
      fs.writeFileSync(file, JSON.stringify(vals, null, "\t"));
      fs.chmodSync(file, 0x1ff);
      return console.log(clc.cyan(Date.create().format("[{h}:{mm}{tt}] ")) + clc.green.inverse("Saved!"));
    }
  };

  module.exports.load = function(file) {
    var contents;

    if (!fs.existsSync(file)) {
      return {};
    }
    contents = fs.readFileSync(file, "utf-8");
    return JSON.parse(contents);
  };

  reset = function(file) {
    if (!fs.existsSync(file)) {
      return {};
    }
    return fs.unlinkSync(file);
  };

}).call(this);

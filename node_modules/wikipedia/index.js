var request = require('request');
var cheerio = require('cheerio');
var color = require('cli-color');
var language = 'en'
var say = require('say');
exports.lang = function(l){
    language = l;

}
exports.wiki = function(word,lang){
    request({url:'http://'+language+'.wikipedia.org/wiki/'+word,encoding:'utf8'},function (err,response,body) {
       console.log(color.green('http://'+language+'.wikipedia.org/wiki/'+word));
        if(err) throw err;
        var $ = cheerio.load(body);
         
         var p = 0;
        
        if($('table.infobox').length){
            var i = $('table.infobox').next();
            for(;!i.hasClass('toc');i = i.next()){
            	//console.log($);
            	p=p+1;
            	if(p>1 && p<3){
            	say.speak(i.text().replace("\n",""));
                console.log(i.text().replace("\n",""));
                continue;
                }
                
                
            }
        }else{
    		
            console.log(color.red('Unable to fetch wiki about ')+word);
        }
        
        
    });

}

